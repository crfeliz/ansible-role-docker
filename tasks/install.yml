---
- name: include os specific variables
  include_vars: '{{ item }}'
  with_first_found:
    - files:
        - '{{ ansible_distribution | lower }}.yml'
        - '{{ ansible_os_family | lower }}.yml'
        - default.yml
      paths:
        - installer



- include: 'installer/pacman.yml'
  when: docker_installer == 'pacman'

- include: 'installer/default.yml'
  when: docker_installer == 'default'



- name: install docker-py
  pip: >-
    'name=docker-py'
    'state=present'
    'executable=pip2'
    {% if docker_dockerpy_version is defined and docker_dockerpy_version %}
    'version={{ docker_dockerpy_version }}'
    {% endif %}

- name: ensure "docker" group present
  group:
    name: docker
    state: present
    system: yes

- name: add users into "docker"
  user:
    append: yes
    groups: docker
    state: present
    name: '{{ item }}'
  with_items: docker_users or []
